---
phase: 17-template-library
plan: 17-01-FIX
type: fix
---

<objective>
Fix 2 UAT issues from plan 17-01.

Source: 17-01-ISSUES.md
Priority: 0 critical, 2 major, 0 minor
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/STATE.md
@.planning/ROADMAP.md

**Issues being fixed:**
@.planning/phases/17-template-library/17-01-ISSUES.md

**Original plan for reference:**
@.planning/phases/17-template-library/17-01-PLAN.md

**Affected files:**
@src/data/diagramTemplates.ts
@src/components/chat/TemplateLibrary.vue
@src/components/chat/ChatInput.vue
</context>

<tasks>

<task type="auto">
  <name>Fix UAT-002: Modal z-index and positioning</name>
  <files>src/components/chat/ChatInput.vue, src/components/chat/TemplateLibrary.vue</files>
  <action>
The modal uses `position: absolute` relative to its parent (ChatInput) which is inside the bottom panel. The z-index of 100 may not be high enough to overlay other panels.

Fix approach:
1. Move the TemplateLibrary component to use `position: fixed` instead of `position: absolute`
2. This ensures the modal overlays the entire viewport, not just the chat input area
3. Update the backdrop positioning to cover the full screen
4. Keep existing modal centering but relative to viewport

In TemplateLibrary.vue:
- Change `.template-library-backdrop` from `position: absolute` to `position: fixed`
- Keep `inset: 0` to cover full viewport
- Increase z-index to 1000 to ensure it's above all panels
  </action>
  <verify>Open app, click Templates button, verify modal is fully visible and overlays all panels</verify>
  <done>Template modal appears centered on screen, fully visible, overlaying all panels</done>
</task>

<task type="auto">
  <name>Fix UAT-001: Template rendering issues</name>
  <files>src/data/diagramTemplates.ts</files>
  <action>
Several templates may have syntax issues or use features not fully supported. The affected templates are:
- Flowchart with Decision
- User Journey
- Gantt
- Sankey Flow
- Git Graph

Investigation needed:
1. Test each template in the Mermaid Live Editor to verify syntax
2. Check if quotes or special characters need escaping
3. For Journey diagram: Mermaid journey syntax requires specific formatting
4. For Gantt: Check dateFormat and task syntax

Likely fixes:
- Journey: The quoted task names may need adjustment - remove quotes around task descriptions
- Gantt: Verify date format and task ID syntax
- Flowchart templates (Sankey, Git Graph, Flowchart with Decision): Should work with `graph LR/TB` - check for any special character issues

Test each template individually and fix syntax issues found.
  </action>
  <verify>Insert each of the 5 affected templates and verify they render correctly in the diagram preview</verify>
  <done>All 12 templates render correctly when inserted into the editor</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All major issues fixed
- [ ] Template modal is fully visible when opened
- [ ] All 12 templates render correctly
- [ ] `npm run type-check` passes
- [ ] `npm run build` succeeds
</verification>

<success_criteria>
- All UAT issues from 17-01-ISSUES.md addressed
- Modal displays correctly overlaying all panels
- All templates render without errors
- Ready for re-verification
</success_criteria>

<output>
After completion, create `.planning/phases/17-template-library/17-01-FIX-SUMMARY.md`
</output>
