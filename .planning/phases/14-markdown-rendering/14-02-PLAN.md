---
phase: 14-markdown-rendering
plan: 02
type: execute
---

<objective>
Integrate MarkdownRenderer into ChatMessage and add comprehensive markdown styles.

Purpose: AI chat responses now render with proper formatting (headers, lists, code blocks, inline code)
Output: ChatMessage displays markdown-formatted AI responses with syntax-highlighted code
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-markdown-rendering/14-01-SUMMARY.md

**Source files:**
@src/components/chat/ChatMessage.vue
@src/components/chat/MarkdownRenderer.vue
@src/assets/styles/variables.css

**Tech stack available:**
- Vue 3.5.26 with Composition API
- marked (installed in 14-01)
- highlight.js (installed in 14-01)

**Established patterns:**
- CSS variables for theming
- Scoped styles with BEM-like naming
- Dark/light theme via CSS variables
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update ChatMessage to use MarkdownRenderer</name>
  <files>src/components/chat/ChatMessage.vue</files>
  <action>
Update ChatMessage component to:
1. Import MarkdownRenderer component
2. Replace `{{ message.content }}` with `<MarkdownRenderer :content="message.content" />` for assistant messages
3. Keep user messages as plain text (no markdown parsing needed)

Change from:
```vue
<div class="message-content">
  {{ message.content }}
</div>
```

To:
```vue
<div class="message-content">
  <template v-if="message.role === 'assistant'">
    <MarkdownRenderer :content="message.content" />
  </template>
  <template v-else>
    {{ message.content }}
  </template>
</div>
```

This ensures only AI responses get markdown parsing, not user input.
  </action>
  <verify>npm run type-check passes</verify>
  <done>ChatMessage uses MarkdownRenderer for assistant messages</done>
</task>

<task type="auto">
  <name>Task 2: Add markdown and highlight.js styles</name>
  <files>src/components/chat/MarkdownRenderer.vue</files>
  <action>
Add comprehensive styles for rendered markdown content. Styles should:

1. **Headers (h1-h6):** Proper sizing, margins, font weights
2. **Paragraphs:** Appropriate line-height and spacing
3. **Lists (ul, ol):** Proper indentation and bullets/numbers
4. **Code blocks (pre > code):**
   - Dark background for both themes
   - Monospace font
   - Padding and border-radius
   - Horizontal scroll for long lines
5. **Inline code (code):**
   - Subtle background
   - Padding
   - Border-radius
6. **Blockquotes:** Left border, italic, muted color
7. **Links:** Theme-appropriate colors
8. **Tables:** If present, basic styling

Highlight.js theme colors - use a minimal theme that works with both light/dark:
- Background: var(--color-surface-elevated)
- Text: var(--color-text-primary)
- Keywords: var(--color-primary)
- Strings: var(--color-success)
- Comments: var(--color-text-secondary)

Import highlight.js default styles or create custom theme using CSS variables.

Example structure:
```css
.markdown-content {
  line-height: 1.6;
}

.markdown-content h1,
.markdown-content h2,
.markdown-content h3 {
  margin-top: var(--spacing-md);
  margin-bottom: var(--spacing-sm);
  font-weight: var(--font-weight-semibold);
}

.markdown-content pre {
  background: var(--color-surface-elevated);
  padding: var(--spacing-sm);
  border-radius: var(--border-radius-sm);
  overflow-x: auto;
}

.markdown-content code {
  font-family: var(--font-mono);
  font-size: 0.9em;
}

/* Inline code */
.markdown-content :not(pre) > code {
  background: var(--color-surface-elevated);
  padding: 0.1em 0.3em;
  border-radius: var(--border-radius-xs);
}
```

IMPORTANT: Use CSS variables for colors so styles work in both light and dark themes.
  </action>
  <verify>npm run type-check passes</verify>
  <done>Markdown styles added covering headers, lists, code blocks, inline code</done>
</task>

<task type="auto">
  <name>Task 3: Verify build and test</name>
  <files>N/A</files>
  <action>
Run full type-check and build to ensure no regressions:
```bash
npm run type-check
npm run build
```

If build succeeds, Phase 14 is complete.
  </action>
  <verify>npm run type-check && npm run build succeeds</verify>
  <done>Type check passes, build succeeds with no errors</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run type-check` passes
- [ ] `npm run build` succeeds
- [ ] ChatMessage renders assistant messages with MarkdownRenderer
- [ ] Code blocks have syntax highlighting
- [ ] Styles work in both light and dark themes
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors introduced
- AI chat responses display formatted markdown
- Code blocks have syntax highlighting
- Phase 14 complete
</success_criteria>

<output>
After completion, create `.planning/phases/14-markdown-rendering/14-02-SUMMARY.md`
</output>
