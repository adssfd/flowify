---
phase: 14-markdown-rendering
plan: 01
type: execute
---

<objective>
Install markdown parsing dependencies and create a reusable MarkdownRenderer component.

Purpose: Enable proper markdown rendering in AI chat responses (headers, lists, code blocks with syntax highlighting)
Output: MarkdownRenderer.vue component that parses markdown and highlights code
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/13-mermaid-skill-prompt/13-01-SUMMARY.md

**Source files:**
@src/components/chat/ChatMessage.vue

**Tech stack available:**
- Vue 3.5.26 with Composition API
- TypeScript 5.9.3
- Vite 7.3.0

**Established patterns:**
- Components use `<script setup lang="ts">`
- CSS variables for theming: `var(--color-*)`
- Scoped styles with BEM-like naming

**Constraining decisions:**
- Phase 13: AI now generates markdown with headers, code blocks, lists
- AI responses include mermaid code blocks and text (ASCII sidecar) blocks

**Library choice:**
- **marked** - Fast, lightweight markdown parser (~40KB)
- **highlight.js** - Syntax highlighting for code blocks
- Both are well-maintained, work in browser, simple APIs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install markdown dependencies</name>
  <files>package.json</files>
  <action>
Install marked and highlight.js:
```bash
npm install marked highlight.js
npm install -D @types/marked
```

Marked parses markdown to HTML. Highlight.js provides syntax highlighting for code blocks.
  </action>
  <verify>npm list marked highlight.js shows both installed</verify>
  <done>marked and highlight.js in dependencies, @types/marked in devDependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create MarkdownRenderer component</name>
  <files>src/components/chat/MarkdownRenderer.vue</files>
  <action>
Create a Vue component that:
1. Accepts `content` prop (string)
2. Uses marked to parse markdown to HTML
3. Configures marked to use highlight.js for code blocks
4. Renders HTML using v-html (content is from trusted AI source)
5. Uses highlight.js languages: javascript, typescript, mermaid (or plaintext fallback)

Configuration:
- Enable GitHub-flavored markdown (gfm: true)
- Enable line breaks (breaks: true)
- Use highlight.js for code highlighting with language detection

Component structure:
```vue
<script setup lang="ts">
import { computed } from 'vue'
import { marked } from 'marked'
import hljs from 'highlight.js/lib/core'
import javascript from 'highlight.js/lib/languages/javascript'
import typescript from 'highlight.js/lib/languages/typescript'
import plaintext from 'highlight.js/lib/languages/plaintext'

// Register languages
hljs.registerLanguage('javascript', javascript)
hljs.registerLanguage('typescript', typescript)
hljs.registerLanguage('mermaid', plaintext) // Mermaid as plaintext
hljs.registerLanguage('text', plaintext)
hljs.registerLanguage('plaintext', plaintext)

const props = defineProps<{ content: string }>()

// Configure marked with highlight.js
marked.setOptions({
  gfm: true,
  breaks: true,
  highlight: (code, lang) => {
    const language = hljs.getLanguage(lang) ? lang : 'plaintext'
    return hljs.highlight(code, { language }).value
  }
})

const renderedHtml = computed(() => marked.parse(props.content))
</script>

<template>
  <div class="markdown-content" v-html="renderedHtml"></div>
</template>
```

IMPORTANT: Import only needed languages to keep bundle small. Don't import entire highlight.js library.
  </action>
  <verify>npm run type-check passes</verify>
  <done>MarkdownRenderer.vue created with marked + highlight.js integration, type-check passes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run type-check` passes
- [ ] marked and highlight.js installed
- [ ] MarkdownRenderer.vue exists with proper structure
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- No TypeScript errors introduced
- MarkdownRenderer component ready for integration
</success_criteria>

<output>
After completion, create `.planning/phases/14-markdown-rendering/14-01-SUMMARY.md`
</output>
